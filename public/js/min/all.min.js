var Comments=angular.module("Comments",["ngMaterial","ngAnimate","ngMessages","ngAria","ui.router","LocalStorageModule"]);!function(e){e.config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"partials/home-partial.html",controller:"HomeController"}).state("about",{url:"/about",templateUrl:"partials/about-partial.html",controller:"AboutController"})}])}(Comments),function(e){function t(e,t,o,l){e.cancel=function(){e.commentName="",e.commentBody="",e.commentEmail="",o.cancel()},e.save=function(){e.addComment(),e.cancel()},e.edit=function(){e.editComment(e.index),e.cancel()}}e.config(function(e,t){e.setPrefix("Comments"),e.setNotify(!0,!0),t.theme("indigo").primaryPalette("indigo").accentPalette("pink").warnPalette("blue"),t.theme("lime").primaryPalette("lime").accentPalette("pink").warnPalette("blue")}),e.controller("commentsController",function(e,o,l,m,n){m.clearAll(),e.appTitle="comments view",e.appSubTitle="Comments List",e.AllComments=m.get("AllComments"),console.log("AllComments bEFOREEEEEE  "+e.AllComments),console.log("localstorage bEFOREEEEEE  "+m.get("AllComments")),e.AllComments=null!==m.get("AllComments")?JSON.parse(e.AllComments):n.get("https://jsonplaceholder.typicode.com/comments").then(function(t){e.AllComments=t.data,m.set("LastID",e.AllComments.length+1),m.set("AllComments",JSON.stringify(e.AllComments)),console.log("AllComments AfTERRRR "+e.AllComments),console.log("localstorage AfTERRRR "+m.get("AllComments"))}),e.search={By:"id"},e.addComment=function(){e.AllComments.push({id:m.get("LastID"),name:e.commentName,body:e.commentBody,email:e.commentEmail}),m.set("AllComments",JSON.stringify(e.AllComments)),m.set("LastID",parseInt(m.get("LastID"))+1)},e.removeComment=function(t){e.searchByID(t),e.AllComments.splice(e.index,1),m.set("AllComments",JSON.stringify(e.AllComments))},e.commentDialog=function(o,m,n){"new"===n?(e.dialogTitle="Add A Comment",e.dialogNewState=!0,e.dialogEditState=!1,e.dialogBt="ADD COMMENT",e.commentName="",e.commentBody="",e.commentEmail=""):"edit"===n&&(e.dialogTitle="Edit A Comment",e.dialogNewState=!1,e.dialogEditState=!0,e.dialogBt="EDIT COMMENT",e.searchByID(m),console.log(e.index),e.commentName=e.AllComments[e.index].name,e.commentBody=e.AllComments[e.index].body,e.commentEmail=e.AllComments[e.index].email),l.show({templateUrl:"AddCommentDialog.html",clickOutsideToClose:!0,scope:e,preserveScope:!0,controller:t})},e.editComment=function(t){e.AllComments[t].name=e.commentName,e.AllComments[t].body=e.commentBody,e.AllComments[t].email=e.commentEmail,m.set("AllComments",JSON.stringify(e.AllComments))},e.searchByID=function(t){for(var o=0;o<e.AllComments.length;o++)console.log(o),e.AllComments[o].id==t&&(e.index=o)}}),e.filter("searchFor",function(){return function(e,t){if(!t.Text)return e;var o=[];return t.Text=angular.lowercase(String(t.Text)),angular.forEach(e,function(e){"id"==t.By?-1!==angular.lowercase(String(e.id)).indexOf(t.Text)&&o.push(e):"email"==t.By&&-1!==angular.lowercase(e.email).indexOf(t.Text)&&o.push(e)}),o}})}(Comments);